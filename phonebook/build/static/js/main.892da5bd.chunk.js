(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(15),a=t.n(r),u=(t(6),t(3)),o=t(4),s=t.n(o),i="/api/persons",d=t(0),j=function(e){var n=e.search,t=e.setSearch;return Object(d.jsxs)("p",{children:["filter shown with ",Object(d.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})},l=function(e){var n=e.addPerson,t=e.newName,c=e.newPhone,r=e.setNewName,a=e.setNewPhone;return Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:t,onChange:function(e){return r(e.target.value)}})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:c,onChange:function(e){return a(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.persons,t=e.search,c=e.delentry;return Object(d.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[e.name," ",e.number," "]}),Object(d.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id)}))})},h=function(e){var n=e.message,t=e.error;return null===n&&null===t?null:Object(d.jsx)("div",{className:n?"message":"error",children:n||t})},f=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),f=o[0],m=o[1],O=Object(c.useState)(""),v=Object(u.a)(O,2),p=v[0],w=v[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),N=g[0],S=g[1],y=Object(c.useState)(null),C=Object(u.a)(y,2),k=C[0],P=C[1],T=Object(c.useState)(null),D=Object(u.a)(T,2),E=D[0],J=D[1];Object(c.useEffect)((function(){s.a.get(i).then((function(e){return r(e.data)}))}),[]);var L=function(e){var n={name:e.name,number:f};(function(e,n){return s.a.put("".concat(i,"/").concat(e),n)})(e.id,n).then((function(c){P("Contact ".concat(n.name," was updated successfully")),r(t.map((function(n){return e.id!==n.id?n:c.data})))})).catch((function(n){return J("".concat(e.name," was already removed from server"))})),setTimeout((function(){return J(null)}),5e3),setTimeout((function(){return P(null)}),5e3)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{message:k,error:E}),Object(d.jsx)(j,{search:N,setSearch:S}),Object(d.jsx)("h2",{children:"Add a new"}),Object(d.jsx)(l,{addPerson:function(e){e.preventDefault();var n,c=t.find((function(e){return e.name===p}));if(c)window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))&&L(c);else{var a={name:p,number:f};(n=a,s.a.post(i,n)).then((function(e){r(t.concat(e.data)),P("Contact ".concat(a.name," was created successfully"))})).catch((function(e){J(e.message)})),setTimeout((function(){return P(null)}),5e3)}w(""),m("")},newName:p,newPhone:f,setNewName:w,setNewPhone:m}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(b,{persons:t,search:N,delentry:function(e){var n;window.confirm("Delete ".concat(e.name," ?"))&&(n=e.id,s.a.delete("".concat(i,"/").concat(n))).then((function(n){return r(t.filter((function(n){return n.id!==e.id})))}))}})]})};a.a.render(Object(d.jsx)(f,{}),document.getElementById("root"))},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.892da5bd.chunk.js.map